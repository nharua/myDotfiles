# -----------------------------------------------------------------------------
# -- General Settings
# -----------------------------------------------------------------------------

# Keep more scrollback history.
set -g history-limit 10000

# Set window and pane base indices to 1, making them easier to select.
set -g base-index 1
setw -g pane-base-index 1
set -g renumber-windows on

# Enable mouse mode to allow scrolling, pane selection, and resizing.
set -g mouse on

set -g xterm-keys on

# -----------------------------------------------------------------------------
# -- Neovim / Modern Terminal Compatibility
# -----------------------------------------------------------------------------

# Reduce escape key delay for faster responsiveness in Neovim.
set-option -sg escape-time 10

# Allow Neovim to detect terminal focus events.
set-option -g focus-events on

# Set the default terminal to support 256 colors.
set-option -g default-terminal "tmux-256color"

# Enable True Color (24-bit color) support by telling tmux that the
# underlying terminal (Alacritty) supports it. This is crucial for themes.
set-option -ga terminal-features ",alacritty:RGB"

# -----------------------------------------------------------------------------
# -- Keybindings
# -----------------------------------------------------------------------------
# Your prefix is the default: Ctrl-B

# Reload config file quickly.
bind r source-file ~/.tmux.conf \; display-message "Config reloaded."

# Split panes, keeping the current path.
bind v split-window -h -c "#{pane_current_path}"
bind h split-window -v -c "#{pane_current_path}"

# Toggle synchronize-panes.
bind y set-window-option synchronize-panes\; display-message "Synchronize mode toggled."

# Set vi mode for copy mode.
setw -g mode-keys vi

# Navigate panes with Alt + Arrow keys without needing the prefix.
bind -n M-Left select-pane -L
bind -n M-Right select-pane -R
bind -n M-Up select-pane -U
bind -n M-Down select-pane -D


# -----------------------------------------------------------------------------
# -- Display Popups
# -----------------------------------------------------------------------------
# File manger with ranger
bind -n C-o display-popup \
  -d "#{pane_current_path}" \
  -w 90% \
  -h 90% \
  -E "spf"

# ----------------------------------------------------------------------------
# -- Theme (Using TPM Plugin)
# -----------------------------------------------------------------------------
# All styling is handled by the Catppuccin plugin below.

# Catppuccin flavor (can be 'latte', 'frappe', 'macchiato', 'mocha').
set -g @catppuccin_flavour 'mocha'
set -g @catppuccin_window_status_style "rounded"

# Add status modules
set -g status-right-length 100
set -g status-left-length 100
set -g status-left ""
set -g status-right " CPU: #{cpu -i 3} |  MEM: #{mem} | 󱛟 DISK: #{disk -f}"
set -ag status-right "#{E:@catppuccin_status_application}"
set -ag status-right "#{E:@catppuccin_status_session}"
set -ag status-right "#{E:@catppuccin_status_uptime}"
set -agF status-right "#{E:@catppuccin_status_battery}"
# Enable smart automatic renaming. The theme will automatically display
# the window name set by this option.
set -g @catppuccin_window_text "#W"
set -g @catppuccin_window_current_text "#W"
set-window-option -g automatic-rename on
set-window-option -g automatic-rename-format '#{b:pane_current_path}'

# -----------------------------------------------------------------------------
# -- Plugin Manager (TPM)
# -----------------------------------------------------------------------------

# List of plugins
set -g @plugin 'catppuccin/tmux#v2.1.3' # Catppuccin theme for tmux
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-cpu'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'hendrikmi/tmux-cpu-mem-monitor'
# set -g @plugin 'tmux-plugins/tmux-continuum' # Uncomment to enable auto-saving sessions

# Initialize TPM (keep this line at the very bottom of your tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

